<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto Binance Bot Signals</title>
<style>
body {
  background:#0b0b0b;
  color:#fff;
  font-family:Arial, sans-serif;
  text-align:center;
  padding:20px;
} 
.signal {
  font-size:34px;
  font-weight:bold;
}
.buy { color:#00ff9c; } 
.sell { color:#ff4d4d; } 
.wait { color:#aaa; }
#timer { font-size:18px; color:#ffd966; margin-bottom:15px; }
.small { font-size:13px; color:#888; }
.logo { width:150px; margin:10px 0; }
</style>
</head>
<body>

<h2>Crypto Binance Bot by <b>ASAD_ALI</b></h2>
<img src="binance-logo.png" alt="Binance Logo" class="logo" />

<div id="timer">Next candle close in: --:--</div>

<div class="box">
  <h3>BTCUSDT</h3>
  <div id="btc" class="signal wait">WAIT</div>
</div>

<div class="box">
  <h3>ETHUSDT</h3>
  <div id="eth" class="signal wait">WAIT</div>
</div>

<div class="small" id="info"></div>

<script>
async function sendTelegram(msg){
  try {
    await fetch("/send", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: msg })
    });
  } catch(e){ console.error(e); }
}

let priceBTC = 100, priceETH = 2000;

function nextCandle(price){
  let move = (Math.random()-0.5)*2;
  let open = price; price += move;
  let close = price;
  return {open, close, newPrice: price};
}

function fakeRSI(){ return Math.floor(Math.random()*100); }

function otcSignal(price){
  let c1=nextCandle(price), c2=nextCandle(c1.newPrice), rsi=fakeRSI();
  if(c1.close<c1.open && c2.close>c2.open && rsi<35) return {signal:"BUY", price:c2.newPrice};
  if(c1.close>c1.open && c2.close<c2.open && rsi>65) return {signal:"SELL", price:c2.newPrice};
  return {signal:"WAIT", price:c2.newPrice};
}

function updateSignals(){
  let btcData=otcSignal(priceBTC); priceBTC=btcData.price;
  document.getElementById('btc').innerText=btcData.signal;
  document.getElementById('btc').className='signal '+(btcData.signal==="BUY"?"buy":btcData.signal==="SELL"?"sell":"wait");
  if(btcData.signal!=="WAIT") sendTelegram(`BTCUSDT | 10M\nSignal: ${btcData.signal}\nTrade manually on Binance`);

  let ethData=otcSignal(priceETH); priceETH=ethData.price;
  document.getElementById('eth').innerText=ethData.signal;
  document.getElementById('eth').className='signal '+(ethData.signal==="BUY"?"buy":ethData.signal==="SELL"?"sell":"wait");
  if(ethData.signal!=="WAIT") sendTelegram(`ETHUSDT | 10M\nSignal: ${ethData.signal}\nTrade manually on Binance`);

  document.getElementById('info').innerText="Updated: "+new Date().toLocaleTimeString();
}

function countdown(){
  let now=new Date();
  let m=now.getMinutes()%10;
  let s=now.getSeconds();
  let left=(9-m)*60+(60-s);
  let mm=Math.floor(left/60).toString().padStart(2,'0');
  let ss=(left%60).toString().padStart(2,'0');
  document.getElementById('timer').innerText="Next candle close in: "+mm+":"+ss;
}

updateSignals();
setInterval(updateSignals,600000);
setInterval(countdown,1000);

</script>

</body>
</html>
